!function(e){var t={};function r(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(o,i,function(t){return e[t]}.bind(null,i));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){var o;void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_VALID=!0,t.IS_LIMIT=!1}.apply(t,[r,t]))||(e.exports=o)},function(e,t,r){var o,i,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};o=[r,t,r(5)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=new((r=s(r)).default);t.default=o}.apply(t,o))||(e.exports=i)},function(e,t,r){var o,i,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};o=[r,t,r(3),r(1)],void 0===(i=function(e,t,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r=s(r),o=s(o),$.fn.extend({inputfollow:function(e){if($(this).length){var t;if($(this).data("inputfollow_id")){i=$(this).data("inputfollow_id");t=o.default.get_collection(i)}else{var i=o.default.get_index();$(this).data("inputfollow_id",i),t=new r.default($(this),i),o.default.push_collection(i,t)}return e&&null!==t&&t.init(e),t}}})}.apply(t,o))||(e.exports=i)},function(e,t,r){var o,i,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};o=[r,t,r(0),r(4),r(1)],void 0===(i=function(e,t,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=s(o),i=s(i);var n=function(){function e(e,t){var r=this;this.index=0,this.error_class="error",this.valid_class="valid",this.initial_error_view=!1,this.on_validate=function(){},this.on_success=function(){},this.on_error=function(){},this.model=new o.default(e),this.index=t,e.on("submit",(function(){return r.set_initial_error_view(!0),r.validate_all(),r.model.get_errors()<=0?($.isFunction(r.on_success)&&r.on_success(),!0):($.isFunction(r.on_error)&&r.on_error(r.model.get_error_mes()),!1)}))}return e.prototype.init=function(e){e.hasOwnProperty("rules")&&e.rules&&this.set_rules(e.rules),e.hasOwnProperty("messages")&&e.messages&&this.set_messages(e.messages),e.hasOwnProperty("error_class")&&e.error_class&&this.set_error_class(e.error_class),e.hasOwnProperty("valid_class")&&e.valid_class&&this.set_valid_class(e.valid_class),e.hasOwnProperty("initial_error_view")&&e.initial_error_view&&this.set_initial_error_view(e.initial_error_view),e.hasOwnProperty("on_validate")&&e.on_validate&&this.set_on_validate(e.on_validate),e.hasOwnProperty("on_success")&&e.on_success&&this.set_on_success(e.on_success),e.hasOwnProperty("on_error")&&e.on_error&&this.set_on_error(e.on_error),this.set_event(),this.validate_all()},e.prototype.set_rules=function(e){this.model.set_rules(e)},e.prototype.set_messages=function(e){this.model.set_messages(e)},e.prototype.set_error_class=function(e){this.error_class=e},e.prototype.set_valid_class=function(e){this.valid_class=e},e.prototype.set_initial_error_view=function(e){this.initial_error_view=e},e.prototype.set_on_validate=function(e){$.isFunction(e)&&(this.on_validate=e)},e.prototype.set_on_success=function(e){$.isFunction(e)&&(this.on_success=e)},e.prototype.set_on_error=function(e){$.isFunction(e)&&(this.on_error=e)},e.prototype.set_event=function(){var e=this;this.model.get_wrap().find("input,select,textarea").off("keydown.inputfollow").on("keydown.inputfollow",(function(){e.validate_before($(this))})).off("click.inputfollow focus.inputfollow change.inputfollow keyup.inputfollow").on("click.inputfollow focus.inputfollow change.inputfollow keyup.inputfollow",(function(){e.validate($(this))}))},e.prototype.validate_before=function(e){!e.data("is_inputfollow")&&e.is(":focus")||e.data("before_val",e.val()+"").data("caret_pos",i.default.get_caret_pos(e.get(0)))},e.prototype.validate=function(e){e.data("is_inputfollow")&&this.validate_all()},e.prototype.validate_all=function(){var e=this;this.model.set_errors(0),this.model.set_error_mes(""),$.each(this.model.get_target(),(function(t,o){var s=e.model.get_rules();if(s.hasOwnProperty(t)){var n=s[t],a=[],l=!0,u=!1,c=null,_=!1,p="inputfollow-error-"+e.index+"-"+t.replace("[]",""),f=e.model.get_wrap().find(".inputfollow-error").filter('[data-target="'+t+'"]');if(f.length&&(_=!0,f.attr("id",p)),o.length)if(Array.isArray(n))n.map((function(s){var n=i.default.check_rules(s);if(u=u||n?r.IS_VALID:r.IS_LIMIT,n===r.IS_VALID&&a.push(s),!e.check_handler(s,o)&&(l=!1,null===c)){var _=e.model.get_messages();Object.prototype.hasOwnProperty.call(_,t)&&Object.prototype.hasOwnProperty.call(_[t],s.type)&&(c=_[t][s.type])}}));else{u=i.default.check_rules(n),l=e.check_handler(n,o),u===r.IS_VALID&&a.push(n);var d=e.model.get_messages();Object.prototype.hasOwnProperty.call(d,t)&&Object.prototype.hasOwnProperty.call(d[t],n.type)&&(c=d[t][n.type])}if(u===r.IS_VALID){var h=e.model.get_target();l?(e.toggle_error_visible(o,h,a,l),_?$("#"+p).text("").addClass("inputfollow-error-empty"):$("#"+p).remove()):(e.model.increment_errors(),_?$("#"+p).text("").addClass("inputfollow-error-empty"):$("#"+p).remove(),null!==c&&(e.model.push_error_mes(c),(o.data("is_focused")||e.initial_error_view)&&(_?$("#"+p).removeClass("inputfollow-error-empty").text(c):o.eq(0).after($("<span>",{id:p,class:"inputfollow-error"}).text(c)),e.toggle_error_visible(o,h,a,l))))}}})),$.isFunction(this.on_validate)&&this.on_validate()},e.prototype.toggle_error_visible=function(e,t,r,o){var i=this;o?e.addClass(this.valid_class).removeClass(this.error_class):e.removeClass(this.valid_class).addClass(this.error_class),r.map((function(e){Array.isArray(e.with)&&e.with.map((function(e){t[e]&&(o?t[e].addClass(i.valid_class).removeClass(i.error_class):t[e].removeClass(i.valid_class).addClass(i.error_class))})),e.if&&Object.keys(e.if).map((function(e){t[e]&&(o?t[e].addClass(i.valid_class).removeClass(i.error_class):t[e].removeClass(i.valid_class).addClass(i.error_class))}))}))},e.prototype.get_errors=function(){return this.model.get_errors()},e.prototype.check_handler=function(e,t){var r=i.default.get_method(e.type);if(!1===r)return!0;var o=this.model.get_target();if(e.if){var s=!0;if(Object.keys(e.if).map((function(t){if(e.if&&Object.prototype.hasOwnProperty.call(e.if,t)){var r=e.if[t];if(o.hasOwnProperty(t)){var i=o[t];(i.is('[type="radio"]')||i.is('[type="checkbox"]')?i.filter(":checked").val():o[t].val())==r&&(s=!1)}}})),!0===s)return!0}if(!e.mode&&!e.with)return r(t);if(e.mode&&e.with){if("or"===e.mode.toLowerCase()){var n=r(t);return e.with.map((function(e){o.hasOwnProperty(e)&&(n=n||r(o[e]))})),n}if("and"===e.mode.toLowerCase()){var a=r(t);return e.with.map((function(e){o.hasOwnProperty(e)&&(a=a&&r(o[e]))})),a}}return!0},e.prototype.reset=function(){this.model.reset_rules(),this.set_event(),this.validate_all()},e}();t.default=n}.apply(t,o))||(e.exports=i)},function(e,t,r){var o,i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,o=arguments.length;r<o;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};void 0===(o=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e){this.errors=0,this.error_mes="",this.rules={},this.target={},this.messages={},this.wrap=e}return e.prototype.get_wrap=function(){return this.wrap},e.prototype.get_target=function(){return this.target},e.prototype.set_rules=function(e){this.rules=i({},e),this.reset_rules()},e.prototype.get_rules=function(){return this.rules},e.prototype.set_errors=function(e){this.errors=e},e.prototype.increment_errors=function(e){void 0===e&&(e=1),this.errors+=e},e.prototype.get_errors=function(){return this.errors},e.prototype.set_error_mes=function(e){this.error_mes=e},e.prototype.push_error_mes=function(e){this.error_mes+="\n"+e},e.prototype.get_error_mes=function(){return this.error_mes},e.prototype.set_messages=function(e){this.messages=i({},e)},e.prototype.get_messages=function(){return this.messages},e.prototype.reset_rules=function(){for(var e in this.wrap.find("input, select, textarea").off("focus.inputfollow_focus"),this.rules){var t=this.filter_target(e);if(this.target[e]=this.initialize_target(t),Array.isArray(this.rules[e]))for(var r=0,o=this.rules[e].length;r<o;r+=1){var i=this.rules[e][r];this.reset_rule(i,t)}else{i=this.rules[e];this.reset_rule(i,t)}}},e.prototype.reset_rule=function(e,t){var r=this;Array.isArray(e.with)&&e.with.map((function(e){r.target[e]=r.initialize_target(r.filter_target(e),t)})),e.if&&Object.keys(e.if).map((function(e){r.target[e]=r.initialize_target(r.filter_target(e),t)}))},e.prototype.enable_focus_flag=function(e){return function(){e.data("is_focused",!0)}},e.prototype.filter_target=function(e){return this.wrap.find("input,select,textarea").filter((function(t,r){return new RegExp("^"+e+"\\[?","i").test(r.getAttribute("name")||"")}))},e.prototype.initialize_target=function(e,t){void 0===t&&(t=null);var r=null!==t?t:e;return e.data("is_inputfollow",!0).data("is_focused",!1).off("focus.inputfollow_focus").on("focus.inputfollow_focus",this.enable_focus_flag(r))},e}();t.default=r}.apply(t,[r,t]))||(e.exports=o)},function(e,t,r){var o,i;o=[r,t,r(0)],void 0===(i=function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this.index=0,this.collection=[],this.rules={required:r.IS_VALID,email:r.IS_VALID,number:r.IS_LIMIT,code:r.IS_LIMIT}}return e.prototype.get_index=function(){var e=this.index;return this.index+=1,e},e.prototype.push_collection=function(e,t){this.collection[e]=t},e.prototype.get_collection=function(e){return this.collection[e]},e.prototype.check_rules=function(e){return!!this.rules.hasOwnProperty(e.type)&&this.rules[e.type]},e.prototype.get_method=function(e){switch(e){case"required":return this.check_method_required.bind(this);case"email":return this.check_method_email.bind(this);case"number":return this.check_method_number.bind(this);case"code":return this.check_method_code.bind(this)}return!1},e.prototype.check_method_required=function(e){return e.is('[type="radio"]')||e.is('[type="checkbox"]')?e.filter(":checked").length>0:""!==e.val()},e.prototype.check_method_email=function(e){return/^([a-z0-9_]|-|\.|\+)+@(([a-z0-9_]|-)+\.)+[a-z]{2,6}$/.test(e.val()+"")},e.prototype.check_method_number=function(e){var t=e.val()+"",r=t;return(t=(t=t.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))).replace(/[^0-9]/g,""))!==r&&(e.val(t),e.is(":focus")&&this.change_caret_pos(e,t)),!0},e.prototype.check_method_code=function(e){var t=e.val()+"",r=t;return(t=(t=(t=t.replace(/[Ａ-Ｚａ-ｚ０-９]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}))).replace(/[−ーー―]/g,"-")).replace(/[^0-9]/g,""))!==r&&(e.val(t),e.is(":focus")&&this.change_caret_pos(e,t)),!0},e.prototype.change_caret_pos=function(e,t){var r=t.length-e.data("before_val").length+e.data("caret_pos");if(void 0!==document.selection){var o=e.get(0).createTextRange();o.move("character",r),o.select()}else try{e.get(0).setSelectionRange(r,r)}catch(e){}},e.prototype.get_caret_pos=function(e){if(void 0!==document.selection){var t=document.selection.createRange(),r=document.createRange();try{r.moveToElementText(e),r.setEndPoint("StartToStart",t)}catch(o){(r=e.createTextRange()).setEndPoint("StartToStart",t)}return e.value.length-r.text.length}try{return e.selectionStart||0}catch(e){return 0}},e.prototype.split_related_rules=function(e){return e.split("_and_").join("_or_").split("_or_").slice(1)},e}();t.default=o}.apply(t,o))||(e.exports=i)}]);
//# sourceMappingURL=jquery.inputfollow.js.map